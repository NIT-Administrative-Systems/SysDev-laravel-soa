(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{387:function(t,a,s){"use strict";s.r(a);var e=s(45),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"northwestern-tools-for-laravel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#northwestern-tools-for-laravel"}},[t._v("#")]),t._v(" Northwestern Tools for Laravel")]),t._v(" "),s("p",[t._v("This package enhanced Laravel with easy access to popular Northwestern APIs & webSSO/Duo multi-factor authentication.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Service")]),t._v(" "),s("th",[t._v("Prerequisites")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Agentless WebSSO")]),t._v(" "),s("td",[t._v("Apigee API key")])]),t._v(" "),s("tr",[s("td",[t._v("Azure AD SSO")]),t._v(" "),s("td",[t._v("Registered Azure AD application")])]),t._v(" "),s("tr",[s("td",[t._v("Directory Search")]),t._v(" "),s("td",[t._v("Data steward approval, Apigee API key")])]),t._v(" "),s("tr",[s("td",[t._v("EventHub")]),t._v(" "),s("td",[t._v("Topics or queues, Apigee API key")])])])]),t._v(" "),s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("p",[t._v("You can install the package via composer:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" require northwestern-sysdev/laravel-soa\nphp artisan vendor:publish --provider"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Northwestern\\SysDev\\SOA\\Providers\\NuSoaServiceProvider"')]),t._v("\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Laravel 6 & 5.x")]),t._v(" "),s("p",[t._v("If you are on an older version of Laravel, the latest version of the package may not install. You can explicitly install v4, which is compatible:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" require northwestern-sysdev/laravel-soa ^4\n")])])])]),t._v(" "),s("p",[t._v("And finally, add the options to your "),s("code",[t._v(".env")]),t._v(" file (and don't forget to update "),s("code",[t._v(".env.example")]),t._v(" for the rest of your team!) for the services you want to use:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# DirectorySearch")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DIRECTORY_SEARCH_API_KEY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# EventHub")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("EVENT_HUB_BASE_URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://northwestern-dev.apigee.net\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("EVENT_HUB_API_KEY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("EVENT_HUB_EVENT_HUB_HMAC_VERIFICATION_SHARED_SECRET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n")])])]),s("h2",{attrs:{id:"usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[t._v("#")]),t._v(" Usage")]),t._v(" "),s("p",[t._v("The API objects should be injected by the Laravel service container. This ensures the configuration is injected into the objects for you:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Controllers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("Northwestern"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("SysDev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("SOA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("DirectorySearch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("MyController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controllers")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ds_api")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("__construct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("DirectorySearch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ds_api")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("ds_api")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ds_api")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),s("p",[t._v("If you are ever in a spot where injection is unavailable, you can always call "),s("code",[t._v("resolve")]),t._v(" yourself. This is particularly handy in the tinker console:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[t._v("Northwestern"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("SysDev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("SOA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("DirectorySearch")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("For troubleshooting, each API has a "),s("code",[t._v("getLastError()")]),t._v(" method. "),s("code",[t._v("dd()")]),t._v("ing the API object should give you everything you'll need, including the request body and URL.")])])}),[],!1,null,null,null);a.default=n.exports}}]);